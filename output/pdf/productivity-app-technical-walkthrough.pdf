%PDF-1.4
%‚„œ”
1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj
2 0 obj << /Type /Pages /Count 3 /Kids [7 0 R 9 0 R 11 0 R] >> endobj
3 0 obj << /Type /Font /Subtype /Type1 /BaseFont /Helvetica >> endobj
4 0 obj << /Type /Font /Subtype /Type1 /BaseFont /Helvetica-Bold >> endobj
5 0 obj << /Type /Font /Subtype /Type1 /BaseFont /Helvetica-Oblique >> endobj
6 0 obj << /Type /Font /Subtype /Type1 /BaseFont /Courier >> endobj
7 0 obj << /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Resources << /Font << /F1 3 0 R /F2 4 0 R /F3 5 0 R /F4 6 0 R >> >> /Contents 8 0 R >> endobj
8 0 obj << /Length 5660 >> stream
q 1 1 1 rg 0 0 612 792 re f Q
0 0 0 rg
BT /F2 19.00 Tf 48.00 760.00 Td (Productivity App - Technical Walkthrough) Tj ET
BT /F3 10.00 Tf 48.00 736.00 Td (Repository: addes4/productivity | Commit: a91177c | Generated: 2026-02-19 10:52) Tj ET
BT /F2 13.00 Tf 48.00 717.00 Td (1. What Was Built) Tj ET
BT /F1 10.00 Tf 48.00 701.00 Td (This project is a local-first weekly planning application that combines goal planning, calendar booking) Tj ET
BT /F1 10.00 Tf 48.00 689.00 Td (management, recurrence support, drag-and-drop editing, overlap visualization, and secure Google Calendar) Tj ET
BT /F1 10.00 Tf 48.00 677.00 Td (import.) Tj ET
BT /F1 10.00 Tf 48.00 665.00 Td (The app is designed to help a user translate weekly goals \(for example study, exercise, or work) Tj ET
BT /F1 10.00 Tf 48.00 653.00 Td (sessions\) into concrete time blocks while respecting existing commitments and user-defined constraints.) Tj ET
BT /F1 10.00 Tf 50.00 641.00 Td (- Frontend stack: React 18 + TypeScript + Vite + Tailwind CSS + date-fns + dnd-kit.) Tj ET
BT /F1 10.00 Tf 50.00 629.00 Td (- Backend helper: a dedicated Node server for OAuth and Google Calendar API proxying.) Tj ET
BT /F1 10.00 Tf 50.00 617.00 Td (- Persistence model: browser localStorage for app state, encrypted token file for Google refresh) Tj ET
BT /F1 10.00 Tf 64.00 605.00 Td (tokens.) Tj ET
BT /F2 13.00 Tf 48.00 585.00 Td (2. High-Level Architecture) Tj ET
BT /F2 11.00 Tf 48.00 569.00 Td (2.1 Frontend Application Shell) Tj ET
BT /F1 10.00 Tf 48.00 555.00 Td (The frontend is orchestrated from src/App.tsx. It composes the calendar grid, side panel, settings) Tj ET
BT /F1 10.00 Tf 48.00 543.00 Td (modal, event modal, and report modal. App.tsx also wires UI actions to store operations and import/sync) Tj ET
BT /F1 10.00 Tf 48.00 531.00 Td (flows.) Tj ET
BT /F1 10.00 Tf 50.00 519.00 Td (- Main route and interaction hub: src/App.tsx.) Tj ET
BT /F1 10.00 Tf 50.00 507.00 Td (- Central state and mutators: src/store/useStore.ts.) Tj ET
BT /F1 10.00 Tf 50.00 495.00 Td (- View components: src/components/*.tsx.) Tj ET
BT /F2 11.00 Tf 48.00 478.00 Td (2.2 Data and Domain Model) Tj ET
BT /F1 10.00 Tf 48.00 464.00 Td (The data model in src/types.ts separates three core concepts: CalendarEvent \(bookings\), ActivityGoal) Tj ET
BT /F1 10.00 Tf 48.00 452.00 Td (\(intent\), and PlannedBlock \(scheduled output\). This separation keeps planning logic deterministic and UI) Tj ET
BT /F1 10.00 Tf 48.00 440.00 Td (rendering predictable.) Tj ET
BT /F1 10.00 Tf 50.00 428.00 Td (- CalendarEvent supports source tags \(manual/import/google\), all-day flags, and recurrence metadata.) Tj ET
BT /F1 10.00 Tf 50.00 416.00 Td (- ActivityGoal supports weekly targets, sessions-per-week mode, day/time preferences, travel buffer,) Tj ET
BT /F1 10.00 Tf 64.00 404.00 Td (and color.) Tj ET
BT /F1 10.00 Tf 50.00 392.00 Td (- PlannedBlock stores status \(planned/done/missed/partial\), lock state, and mini-session markers.) Tj ET
BT /F2 13.00 Tf 48.00 372.00 Td (3. Scheduling Engine \(How Planning Actually Works\)) Tj ET
BT /F2 11.00 Tf 48.00 356.00 Td (3.1 Entry Point and Scope) Tj ET
BT /F1 10.00 Tf 48.00 342.00 Td (Planning runs through planWeek\(...\) in src/utils/planWeek.ts, triggered by runPlanWeek\(...\) in useStore.) Tj ET
BT /F1 10.00 Tf 48.00 330.00 Td (The week start is normalized to Monday to keep day indexing consistent across all calculations.) Tj ET
BT /F1 10.00 Tf 50.00 318.00 Td (- Locked blocks in the active week are preserved.) Tj ET
BT /F1 10.00 Tf 50.00 306.00 Td (- Unlocked blocks in the active week are regenerated.) Tj ET
BT /F1 10.00 Tf 50.00 294.00 Td (- Blocks outside the active week are kept unchanged.) Tj ET
BT /F2 11.00 Tf 48.00 277.00 Td (3.2 Constraint Synthesis) Tj ET
BT /F1 10.00 Tf 48.00 263.00 Td (For each day, the planner builds blocked intervals from existing calendar events, locked planned blocks,) Tj ET
BT /F1 10.00 Tf 48.00 251.00 Td (travel buffers after locked blocks, and sleep windows \(including cross-midnight handling\).) Tj ET
BT /F1 10.00 Tf 50.00 239.00 Td (- Work-hour framing can limit scheduling to a configured daily interval.) Tj ET
BT /F1 10.00 Tf 50.00 227.00 Td (- Allowed days, earliest start, and latest end are enforced per goal.) Tj ET
BT /F1 10.00 Tf 50.00 215.00 Td (- Minimum break minutes are applied when selecting and reserving slots.) Tj ET
BT /F2 11.00 Tf 48.00 198.00 Td (3.3 Goal Ordering and Slot Scoring) Tj ET
BT /F1 10.00 Tf 48.00 184.00 Td (Goals are sorted by priority \(high to low\), then by shorter session duration first. Candidate slots are) Tj ET
BT /F1 10.00 Tf 48.00 172.00 Td (scored by preferred time of day \(morning/lunch/evening/any\) and basic duration fit.) Tj ET
BT /F1 10.00 Tf 50.00 160.00 Td (- This strategy increases success for high-priority and tighter-fit goals.) Tj ET
BT /F1 10.00 Tf 50.00 148.00 Td (- The algorithm greedily places one session at a time in the best available slot.) Tj ET
BT /F2 11.00 Tf 48.00 131.00 Td (3.4 Session Count Logic and Fallback) Tj ET
BT /F1 10.00 Tf 48.00 117.00 Td (Each goal computes intended session count using sessionsPerWeek when provided, otherwise via) Tj ET
BT /F1 10.00 Tf 48.00 105.00 Td (weeklyTargetMinutes/sessionMinutes. If the week is full and Minimum Viable Day is enabled, the planner) Tj ET
BT /F1 10.00 Tf 48.00 93.00 Td (attempts 10-minute mini sessions.) Tj ET
BT /F1 10.00 Tf 50.00 81.00 Td (- Unschedulable remainder generates a ConflictReport with actionable suggestion text.) Tj ET
BT /F1 10.00 Tf 50.00 69.00 Td (- Mini sessions are labeled \(isMini=true\) for transparent UX.) Tj ET
BT /F1 9 Tf 48.00 26.00 Td (Page 1 of 3) Tj ET
endstream endobj
9 0 obj << /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Resources << /Font << /F1 3 0 R /F2 4 0 R /F3 5 0 R /F4 6 0 R >> >> /Contents 10 0 R >> endobj
10 0 obj << /Length 5878 >> stream
q 1 1 1 rg 0 0 612 792 re f Q
0 0 0 rg
BT /F2 11.00 Tf 48.00 760.00 Td (3.5 Key Behavioral Rule: Gym Distribution) Tj ET
BT /F1 10.00 Tf 48.00 746.00 Td (A dedicated daily cap ensures gym goals are not scheduled multiple times on the same day. The) Tj ET
BT /F1 10.00 Tf 48.00 734.00 Td (implementation tracks gym sessions per day globally and also per goal where sessionsPerWeek is explicit.) Tj ET
BT /F1 10.00 Tf 50.00 722.00 Td (- Outcome: selecting 3 gym sessions per week spreads sessions across different days when possible.) Tj ET
BT /F2 13.00 Tf 48.00 702.00 Td (4. Calendar Rendering and Interaction Model) Tj ET
BT /F2 11.00 Tf 48.00 686.00 Td (4.1 Week Grid and All-Day Lane) Tj ET
BT /F1 10.00 Tf 48.00 672.00 Td (src/components/CalendarGrid.tsx renders a fixed header, a dedicated all-day row, and an hourly timeline.) Tj ET
BT /F1 10.00 Tf 48.00 660.00 Td (Week-number pseudo-events are filtered out from normal event rendering.) Tj ET
BT /F1 10.00 Tf 50.00 648.00 Td (- Timed events and planned blocks are rendered in day columns.) Tj ET
BT /F1 10.00 Tf 50.00 636.00 Td (- All-day events are shown in compact chips at the top day lane.) Tj ET
BT /F2 11.00 Tf 48.00 619.00 Td (4.2 Overlap Visualization \(1/2, 1/3, 1/4 Splits\)) Tj ET
BT /F1 10.00 Tf 48.00 605.00 Td (The utility src/utils/overlapLayout.ts computes overlap groups and assigns per-item columns.) Tj ET
BT /F1 10.00 Tf 48.00 593.00 Td (CalendarGrid applies this to both bookings and planned blocks so collisions remain visible.) Tj ET
BT /F1 10.00 Tf 50.00 581.00 Td (- Two overlaps: each item gets roughly half width.) Tj ET
BT /F1 10.00 Tf 50.00 569.00 Td (- Three overlaps: each item gets roughly one third.) Tj ET
BT /F1 10.00 Tf 50.00 557.00 Td (- Four overlaps: each item gets roughly one fourth.) Tj ET
BT /F1 10.00 Tf 50.00 545.00 Td (- A hard guard rejects operations that would create more than 4 concurrent items.) Tj ET
BT /F2 11.00 Tf 48.00 528.00 Td (4.3 Drag-and-Drop Editing) Tj ET
BT /F1 10.00 Tf 48.00 514.00 Td (Drag-and-drop is unified for planned blocks and calendar events. Drop targets are hour cells encoded as) Tj ET
BT /F1 10.00 Tf 48.00 502.00 Td (day+hour identifiers. On drop, new ranges are validated before persistence.) Tj ET
BT /F1 10.00 Tf 50.00 490.00 Td (- Planned block move validates sleep-window overlap and 4-way concurrency limit.) Tj ET
BT /F1 10.00 Tf 50.00 478.00 Td (- Calendar event move also respects the global 4-way concurrency limit.) Tj ET
BT /F1 10.00 Tf 50.00 466.00 Td (- Dragging across days is supported by target-cell interpretation, not just vertical delta.) Tj ET
BT /F2 11.00 Tf 48.00 449.00 Td (4.4 Compact Rendering for Short Blocks) Tj ET
BT /F1 10.00 Tf 48.00 435.00 Td (Very short visual blocks now prioritize activity/event name instead of time text. This avoids clipped or) Tj ET
BT /F1 10.00 Tf 48.00 423.00 Td (unreadable labels and preserves semantic clarity in dense schedules.) Tj ET
BT /F2 13.00 Tf 48.00 403.00 Td (5. Booking Lifecycle: Manual, Recurring, Import, Google) Tj ET
BT /F2 11.00 Tf 48.00 387.00 Td (5.1 Manual and Recurring Bookings) Tj ET
BT /F1 10.00 Tf 48.00 373.00 Td (AddEventModal supports weekly recurrence by weekday selection. Recurring templates store recurrenceDays) Tj ET
BT /F1 10.00 Tf 48.00 361.00 Td (and optional recurrenceExDates \(date exceptions\).) Tj ET
BT /F1 10.00 Tf 50.00 349.00 Td (- When recurrence is enabled, at least one weekday is required.) Tj ET
BT /F1 10.00 Tf 50.00 337.00 Td (- Single-instance deletion writes an exception date instead of deleting the whole series.) Tj ET
BT /F1 10.00 Tf 50.00 325.00 Td (- When a single recurring instance is dragged, the parent series receives an exception and a) Tj ET
BT /F1 10.00 Tf 64.00 313.00 Td (detached one-off event is created.) Tj ET
BT /F2 11.00 Tf 48.00 296.00 Td (5.2 Weekly Expansion of Recurrence) Tj ET
BT /F1 10.00 Tf 48.00 282.00 Td (src/utils/recurringEvents.ts expands recurrence templates into concrete instances for the visible week.) Tj ET
BT /F1 10.00 Tf 48.00 270.00 Td (Each instance carries recurrenceParentId and recurrenceInstanceDate for targeted edits.) Tj ET
BT /F2 11.00 Tf 48.00 253.00 Td (5.3 iCal Import) Tj ET
BT /F1 10.00 Tf 48.00 239.00 Td (ICS import parses incoming events and deduplicates against existing entries using a normalized key based) Tj ET
BT /F1 10.00 Tf 48.00 227.00 Td (on lowercase title + start + end. Imported events are marked source='import'.) Tj ET
BT /F2 11.00 Tf 48.00 210.00 Td (5.4 Google Calendar Import) Tj ET
BT /F1 10.00 Tf 48.00 196.00 Td (Google events are fetched for the active week through the backend proxy, normalized into the app schema,) Tj ET
BT /F1 10.00 Tf 48.00 184.00 Td (categorized by source calendar, deduplicated, and merged into state as source='google'.) Tj ET
BT /F1 10.00 Tf 50.00 172.00 Td (- Auto-sync is attempted once per week navigation while connected.) Tj ET
BT /F1 10.00 Tf 50.00 160.00 Td (- Manual sync remains available for explicit refresh.) Tj ET
BT /F2 13.00 Tf 48.00 140.00 Td (6. Security and Backend Design for Google OAuth) Tj ET
BT /F1 10.00 Tf 48.00 124.00 Td (server/googleCalendarProxy.mjs exists to avoid exposing secrets in the frontend. OAuth client secret and) Tj ET
BT /F1 10.00 Tf 48.00 112.00 Td (token encryption key remain server-side. The frontend only uses /api/* endpoints.) Tj ET
BT /F1 10.00 Tf 50.00 100.00 Td (- OAuth session state uses short-lived server memory + HttpOnly cookie.) Tj ET
BT /F1 10.00 Tf 50.00 88.00 Td (- Return URL is sanitized to frontend origin to prevent open redirects.) Tj ET
BT /F1 10.00 Tf 50.00 76.00 Td (- Refresh tokens are encrypted at rest using AES-256-GCM with key material derived from env secret.) Tj ET
BT /F1 10.00 Tf 50.00 64.00 Td (- Connections are persisted in server/data/google-connections.json via atomic write.) Tj ET
BT /F1 9 Tf 48.00 26.00 Td (Page 2 of 3) Tj ET
endstream endobj
11 0 obj << /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Resources << /Font << /F1 3 0 R /F2 4 0 R /F3 5 0 R /F4 6 0 R >> >> /Contents 12 0 R >> endobj
12 0 obj << /Length 4510 >> stream
q 1 1 1 rg 0 0 612 792 re f Q
0 0 0 rg
BT /F1 10.00 Tf 50.00 760.00 Td (- Disconnect revokes token \(best effort\), removes stored connection, and clears cookie.) Tj ET
BT /F1 10.00 Tf 50.00 748.00 Td (- CORS is restricted to configured frontend origin.) Tj ET
BT /F2 13.00 Tf 48.00 728.00 Td (7. User-Configurable Behavior) Tj ET
BT /F1 10.00 Tf 48.00 712.00 Td (Settings allow work-hour boundaries, sleep windows, minimum break, max activities per day, office days,) Tj ET
BT /F1 10.00 Tf 48.00 700.00 Td (and distinct color themes per booking source \(manual/import/google\).) Tj ET
BT /F1 10.00 Tf 50.00 688.00 Td (- Color values are validated to strict #RRGGBB format before storage.) Tj ET
BT /F1 10.00 Tf 50.00 676.00 Td (- Goal forms support location, priority, allowed days, and time-of-day preference tuning.) Tj ET
BT /F2 13.00 Tf 48.00 656.00 Td (8. Reliability Guards and Edge Cases) Tj ET
BT /F1 10.00 Tf 50.00 640.00 Td (- Concurrency guard prevents creating or moving into >4 overlapping items.) Tj ET
BT /F1 10.00 Tf 50.00 628.00 Td (- Invalid ranges \(end <= start\) are filtered during processing and rendering.) Tj ET
BT /F1 10.00 Tf 50.00 616.00 Td (- Week-number helper events are excluded from normal booking logic.) Tj ET
BT /F1 10.00 Tf 50.00 604.00 Td (- Cross-midnight sleep windows are treated as true blocked ranges.) Tj ET
BT /F1 10.00 Tf 50.00 592.00 Td (- Google invalid_grant clears stale connection and prompts reconnect flow.) Tj ET
BT /F2 13.00 Tf 48.00 572.00 Td (9. File-Level Map for Key Responsibilities) Tj ET
BT /F4 9.40 Tf 56.00 556.00 Td (src/App.tsx                              -> top-level orchestration and import/sync wiring) Tj ET
BT /F4 9.40 Tf 56.00 544.00 Td (src/store/useStore.ts                    -> state CRUD, persistence, planner trigger) Tj ET
BT /F4 9.40 Tf 56.00 532.00 Td (src/utils/planWeek.ts                    -> scheduling algorithm and conflict reporting) Tj ET
BT /F4 9.40 Tf 56.00 520.00 Td (src/utils/overlapLayout.ts               -> overlap math, column layout, concurrency cap) Tj ET
BT /F4 9.40 Tf 56.00 508.00 Td (src/utils/recurringEvents.ts             -> weekly recurrence expansion) Tj ET
BT /F4 9.40 Tf 56.00 496.00 Td (src/components/CalendarGrid.tsx          -> calendar render pipeline + drag/drop logic) Tj ET
BT /F4 9.40 Tf 56.00 484.00 Td (src/components/AddEventModal.tsx         -> booking and recurrence authoring UI) Tj ET
BT /F4 9.40 Tf 56.00 472.00 Td (src/components/SettingsPanel.tsx         -> behavior and color configuration UI) Tj ET
BT /F4 9.40 Tf 56.00 460.00 Td (server/googleCalendarProxy.mjs           -> OAuth flow, token storage, Google API proxy) Tj ET
BT /F2 13.00 Tf 48.00 440.00 Td (10. End-to-End Flow \(Practical Sequence\)) Tj ET
BT /F1 10.00 Tf 50.00 424.00 Td (- User adds bookings manually or imports via ICS/Google.) Tj ET
BT /F1 10.00 Tf 50.00 412.00 Td (- User defines goals with constraints and preferences.) Tj ET
BT /F1 10.00 Tf 50.00 400.00 Td (- Planner computes free slots, places sessions, and emits conflicts if needed.) Tj ET
BT /F1 10.00 Tf 50.00 388.00 Td (- Calendar shows schedule with overlap splitting and source-specific colors.) Tj ET
BT /F1 10.00 Tf 50.00 376.00 Td (- User drags blocks/events to adjust plan; validators enforce rules.) Tj ET
BT /F1 10.00 Tf 50.00 364.00 Td (- User tracks completion states and reviews weekly progress report.) Tj ET
BT /F2 13.00 Tf 48.00 344.00 Td (11. How to Run and Verify) Tj ET
BT /F2 11.00 Tf 48.00 328.00 Td (Frontend) Tj ET
BT /F4 9.40 Tf 56.00 314.00 Td (npm install) Tj ET
BT /F4 9.40 Tf 56.00 302.00 Td (npm run dev) Tj ET
BT /F2 11.00 Tf 48.00 290.00 Td (Google proxy \(optional\)) Tj ET
BT /F4 9.40 Tf 56.00 276.00 Td (cp .env.server.example .env.server) Tj ET
BT /F4 9.40 Tf 56.00 264.00 Td (npm run dev:server) Tj ET
BT /F2 11.00 Tf 48.00 252.00 Td (Production build check) Tj ET
BT /F4 9.40 Tf 56.00 238.00 Td (npm run build) Tj ET
BT /F2 13.00 Tf 48.00 218.00 Td (12. Summary) Tj ET
BT /F1 10.00 Tf 48.00 202.00 Td (The implemented system is more than a static calendar UI: it is a constraint-aware planning engine with) Tj ET
BT /F1 10.00 Tf 48.00 190.00 Td (interactive schedule editing, recurrence management, overlap-safe layout, and secure Google) Tj ET
BT /F1 10.00 Tf 48.00 178.00 Td (synchronization. The architecture keeps planning logic isolated, state transitions explicit, and) Tj ET
BT /F1 10.00 Tf 48.00 166.00 Td (sensitive credentials off the client.) Tj ET
BT /F1 9 Tf 48.00 26.00 Td (Page 3 of 3) Tj ET
endstream endobj
xref
0 13
0000000000 65535 f 
0000000015 00000 n 
0000000064 00000 n 
0000000134 00000 n 
0000000204 00000 n 
0000000279 00000 n 
0000000357 00000 n 
0000000425 00000 n 
0000000581 00000 n 
0000006293 00000 n 
0000006450 00000 n 
0000012381 00000 n 
0000012539 00000 n 
trailer << /Size 13 /Root 1 0 R >>
startxref
17102
%%EOF
